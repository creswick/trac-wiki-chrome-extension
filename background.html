<!DOCTYPE html>
<html>
  <head>
    <script>
      function onRequest(request, sender, sendResponse) {
        chrome.pageAction.show(sender.tab.id);
        sendResponse({});
      };

      chrome.extension.onRequest.addListener(onRequest);
      chrome.pageAction.onClicked.addListener(function(t) {
          var new_url = t.url.replace(/[?#].*/, '') + '?action=edit';
          chrome.tabs.update(t.id, {url:new_url});
      });
    </script>
  </head>
</html>
